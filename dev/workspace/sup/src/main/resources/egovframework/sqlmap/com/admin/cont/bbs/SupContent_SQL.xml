<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="SupContentDAO" >

	<resultMap id="supClist" type="egovframework.com.admin.bbs.cont.service.SupContentVO">
		<result property='NTT_ID' column='NTT_ID' />
		<result property='BBS_ID' column='BBS_ID' />
		<result property='NTT_NO' column='NTT_NO' />
		<result property='NTT_SJ' column='NTT_SJ' />
		<result property='NTT_CN' column='NTT_CN' />
		<result property='ANSWER_AT' column='ANSWER_AT' />
		<result property='PARNTSCTT_NO' column='PARNTSCTT_NO' />
		<result property='ANSWER_LC' column='ANSWER_LC' />
		<result property='SORT_ORDR' column='SORT_ORDR' />
		<result property='USE_AT' column='USE_AT' />
		<result property='RDCNT' column='RDCNT' />
		<result property='NTCE_BGNDE' column='NTCE_BGNDE' />
		<result property='NTCE_ENDDE' column='NTCE_ENDDE' />
		<result property='NTCR_ID' column='NTCR_ID' />
		<result property='NTCR_NM' column='NTCR_NM' />
		<result property='PASSWORD' column='PASSWORD' />
		<result property='ATCH_FILE_ID' column='ATCH_FILE_ID' />
		<result property='FRST_REGIST_PNTTM' column='FRST_REGIST_PNTTM' />
		<result property='FRST_REGISTER_ID' column='FRST_REGISTER_ID' />
		<result property='LAST_UPDT_PNTTM' column='LAST_UPDT_PNTTM' />
		<result property='LAST_UPDUSR_ID' column='LAST_UPDUSR_ID' />
		<result property='POSITION' column='POSITION' />
		<result property='TITLE' column='TITLE' />
		<result property='PTB' column='PTB' />
		<result property='FTYPE' column='FTYPE' />
		<result property='TERM' column='TERM' />
		<result property='PUSHDATE' column='PUSHDATE' />
		<result property='THUMBNAIL' column='THUMBNAIL' />
		<result property='ATTACHMENT' column='ATTACHMENT' />
		<result property='CONTENT' column='CONTENT' />
		<result property='VIDEO' column='VIDEO' />
		<result property='HEAD_SIGN' column='HEAD_SIGN' />
		<result property='ONOFF' column='ONOFF' />
		<result property='MBER_ID' column='MBER_ID' />
		<result property='APPROVAL' column='APPROVAL' />
		<result property='BOOK_DATE' column='BOOK_DATE' />
		<result property='PRICE' column='PRICE' />
		<result property='CNT' column='CNT' />
		<result property='FDATE' column='FDATE' />
		<result property='SDATE' column='SDATE' />
		<result property='FDAY' column='FDAY' />
		<result property='SDAY' column='SDAY' />
		<result property='FTIME' column='FTIME' />
		<result property='STIME' column='STIME' />
		<result property='COMPANIES' column='COMPANIES' />
		<result property='EMAIL_AGREE' column='EMAIL_AGREE' />
		<result property='TEAMNAME' column='TEAMNAME' />
		<result property='CRNUM' column='CRNUM' />
		<result property='TEAMCONTENT' column='TEAMCONTENT' />
		<result property='ADDRESS' column='ADDRESS' />
		<result property='EVENTNAME' column='EVENTNAME' />
		<result property='TARGET' column='TARGET' />
		<result property='ENTRYFEE' column='ENTRYFEE' />
		<result property='ITEM' column='ITEM' />
		<result property='AFFILIATION' column='AFFILIATION' />
		<result property='TEL_SEC' column='TEL_SEC' />
		<result property='FOBJECT' column='FOBJECT' />
		<result property='STARTING' column='STARTING' />
		<result property='REQUEST' column='REQUEST' />
		<result property='REQURIEMENT' column='REQURIEMENT' />
		<result property='BUS' column='BUS' />
		<result property='NAME' column='NAME' />
		<result property='SIMPLECONTENT' column='SIMPLECONTENT' />
		<result property='PLACE' column='PLACE' />
		<result property='MIMAGE' column='MIMAGE' />
		<result property='IMAGE' column='IMAGE' />
		<result property='DETAIL' column='DETAIL' />
		<result property='FFILE' column='FFILE' />
		<result property='RUNTIME' column='RUNTIME' />
		<result property='FYEAR' column='FYEAR' />
		<result property='CAPTAINNAME' column='CAPTAINNAME' />
		<result property='FORM' column='FORM' />
		<result property='MAKEYEAR' column='MAKEYEAR' />
		<result property='FLOOR' column='FLOOR' />
		<result property='ROOM' column='ROOM' />
		<result property='MOVEDATE' column='MOVEDATE' />
		<result property='MOVEPLAN' column='MOVEPLAN' />
		<result property='ITEM_OBJECT' column='ITEM_OBJECT' />
		<result property='ITEM_SUBJECT' column='ITEM_SUBJECT' />
		<result property='CHARGE_TEL' column='CHARGE_TEL' />
		<result property='OFFICE_TEL' column='OFFICE_TEL' />
		<result property='EMAIL' column='EMAIL' />
		<result property='HOMEPAGE' column='HOMEPAGE' />
		<result property='LOGO' column='LOGO' />
		<result property='ITEM_IMAGE' column='ITEM_IMAGE' />
		<result property='INTRO' column='INTRO' />
	</resultMap> 
	
	
	
	<select id="ContentSelectCommPlace"  resultMap="supClist" parameterType="bvo">
		SELECT NTT_ID 
				,BBS_ID 
				,NTT_NO 
				,NTT_SJ 
				,NTT_CN 
				,ANSWER_AT 
				,PARNTSCTT_NO 
				,ANSWER_LC 
				,SORT_ORDR 
				,USE_AT 
				,RDCNT 
				,NTCE_BGNDE 
				,NTCE_ENDDE 
				,NTCR_ID 
				,NTCR_NM 
				,PASSWORD 
				,ATCH_FILE_ID 
				,FRST_REGIST_PNTTM 
				,FRST_REGISTER_ID 
				,LAST_UPDT_PNTTM 
				,LAST_UPDUSR_ID 
				,POSITION 
				,TITLE 
				,PTB 
				,FTYPE 
				,TERM 
				,PUSHDATE 
				,THUMBNAIL 
				,ATTACHMENT 
				,CONTENT 
				,VIDEO 
				,HEAD_SIGN 
				,ONOFF 
				,MBER_ID 
				,APPROVAL 
				,BOOK_DATE 
				,PRICE 
				,CNT 
				,to_char(FDATE  , 'YYYY-MM-DD') FDATE 
				,to_char(SDATE  , 'YYYY-MM-DD') SDATE 
				,FDAY 
				,SDAY 
				,FTIME 
				,STIME 
				,COMPANIES 
				,EMAIL_AGREE 
				,TEAMNAME 
				,CRNUM 
				,TEAMCONTENT 
				,ADDRESS 
				,EVENTNAME 
				,TARGET 
				,ENTRYFEE 
				,ITEM 
				,AFFILIATION 
				,TEL_SEC 
				,FOBJECT 
				,STARTING 
				,REQUEST 
				,REQURIEMENT 
				,BUS 
				,NAME 
				,SIMPLECONTENT 
				,PLACE 
				,MIMAGE 
				,IMAGE 
				,DETAIL 
				,RUNTIME 
				,FYEAR 
				,CAPTAINNAME 
				,FORM 
				,MAKEYEAR 
				,FLOOR 
				,ROOM 
				,MOVEDATE 
				,MOVEPLAN 
				,ITEM_OBJECT 
				,ITEM_SUBJECT 
				,CHARGE_TEL 
				,OFFICE_TEL 
				,EMAIL 
				,HOMEPAGE 
				,LOGO 
				,ITEM_IMAGE 
				,INTRO 
				from COMTNBBS
			WHERE 1=1 
	<choose>		  
    <when test="NTT_ID == 'reservtrip'">
     and  NTT_ID in (#{NTT_ID} , 'reservtripT')
    </when>
    <when test="NTT_ID == 'reservtripT'">
     and  NTT_ID in (#{NTT_ID} , 'reservtrip')
    </when>
    <otherwise>
      and  NTT_ID = #{NTT_ID}
    </otherwise>
   </choose>
			order by FDATE
	</select>


	
	<select id="ContentSelectCommPlaceOne" resultMap="supClist" parameterType="supVo">
		SELECT NTT_ID 
				,BBS_ID 
				,NTT_NO 
				,NTT_SJ 
				,NTT_CN 
				,ANSWER_AT 
				,PARNTSCTT_NO 
				,ANSWER_LC 
				,SORT_ORDR 
				,USE_AT 
				,RDCNT 
				,NTCE_BGNDE 
				,NTCE_ENDDE 
				,NTCR_ID 
				,NTCR_NM 
				,PASSWORD 
				,ATCH_FILE_ID 
				,FRST_REGIST_PNTTM 
				,FRST_REGISTER_ID 
				,LAST_UPDT_PNTTM 
				,LAST_UPDUSR_ID 
				,POSITION 
				,TITLE 
				,PTB 
				,FTYPE 
				,TERM 
				,PUSHDATE 
				,THUMBNAIL 
				,ATTACHMENT 
				,CONTENT 
				,VIDEO 
				,HEAD_SIGN 
				,DECODE(ONOFF , 'Y' , '승인'  , 'N', '거절')  as ONOFF 
				,MBER_ID 
				,APPROVAL 
				,BOOK_DATE 
				,PRICE 
				,CNT 
				,to_char(FDATE  , 'YYYY-MM-DD') FDATE 
				,to_char(SDATE  , 'YYYY-MM-DD') SDATE
				,FDAY 
				,SDAY 
				,FTIME 
				,STIME 
				,COMPANIES 
				,EMAIL_AGREE 
				,TEAMNAME 
				,CRNUM 
				,TEAMCONTENT 
				,ADDRESS 
				,EVENTNAME 
				,TARGET 
				,ENTRYFEE 
				,ITEM 
				,AFFILIATION 
				,TEL_SEC 
				,FOBJECT 
				,STARTING 
				,REQUEST 
				,REQURIEMENT 
				,BUS 
				,NAME 
				,SIMPLECONTENT 
				,PLACE 
				,MIMAGE 
				,IMAGE 
				,DETAIL 
				,RUNTIME 
				,FYEAR 
				,CAPTAINNAME 
				,FORM 
				,MAKEYEAR 
				,FLOOR 
				,ROOM 
				,MOVEDATE 
				,MOVEPLAN 
				,ITEM_OBJECT 
				,ITEM_SUBJECT 
				,CHARGE_TEL 
				,OFFICE_TEL 
				,EMAIL 
				,HOMEPAGE 
				,LOGO 
				,ITEM_IMAGE 
				,INTRO 
				,USAGE
				FROM COMTNBBS
				WHERE 1=1
				AND BBS_ID = #{BBS_ID}
	</select>
	


	<insert id="ContentInsertData" parameterType="bvo" >
				insert into COMTNBBS
				(NTT_ID 
				,BBS_ID
				,NTT_NO 
				,NTT_SJ 
				,NTT_CN 
				,ANSWER_AT 
				,PARNTSCTT_NO 
				,ANSWER_LC 
				,SORT_ORDR 
				,USE_AT 
				,RDCNT 
				,NTCE_BGNDE 
				,NTCE_ENDDE 
				,NTCR_ID 
				,NTCR_NM 
				,PASSWORD 
				,ATCH_FILE_ID 
				,FRST_REGIST_PNTTM 
				,FRST_REGISTER_ID 
				,LAST_UPDT_PNTTM 
				,LAST_UPDUSR_ID 
				,POSITION 
				,TITLE 
				,PTB 
				,FTYPE 
				,TERM 
				,PUSHDATE 
				,THUMBNAIL 
				,ATTACHMENT 
				,CONTENT 
				,VIDEO 
				,HEAD_SIGN 
				,MBER_ID 
				,APPROVAL 
				,BOOK_DATE 
				,PRICE 
				,CNT 
				,FDATE 
				,SDATE 
				,FDAY 
				,SDAY 
				,FTIME 
				,STIME 
				,COMPANIES 
				,EMAIL_AGREE 
				,TEAMNAME 
				,CRNUM 
				,TEAMCONTENT 
				,ADDRESS 
				,EVENTNAME 
				,TARGET 
				,ENTRYFEE 
				,ITEM 
				,AFFILIATION 
				,TEL_SEC 
				,FOBJECT 
				,STARTING 
				,REQUEST 
				,REQURIEMENT 
				,BUS 
				,NAME 
				,SIMPLECONTENT 
				,PLACE 
				,MIMAGE 
				,IMAGE 
				,DETAIL 
				,RUNTIME 
				,FYEAR 
				,CAPTAINNAME 
				,FORM 
				,MAKEYEAR 
				,FLOOR 
				,ROOM 
				,MOVEDATE 
				,MOVEPLAN 
				,ITEM_OBJECT 
				,ITEM_SUBJECT 
				,CHARGE_TEL 
				,OFFICE_TEL 
				,EMAIL 
				,HOMEPAGE 
				,LOGO 
				,ITEM_IMAGE 
				,INTRO 
				,FFILE 
				)
				values
				(#{NTT_ID}
				,seq_content.nextval
				,#{NTT_NO}
				,#{NTT_SJ}
				,#{NTT_CN}
				,#{ANSWER_AT}
				,#{PARNTSCTT_NO}
				,#{ANSWER_LC}
				,#{SORT_ORDR}
				,'5'
				,0
				,#{NTCE_BGNDE}
				,#{NTCE_ENDDE}
				,#{NTCR_ID}
				,#{NTCR_NM}
				,#{PASSWORD}
				,#{ATCH_FILE_ID}
				,SYSDATE
				,#{FRST_REGISTER_ID}
				,SYSDATE
				,#{LAST_UPDUSR_ID}
				,#{POSITION}
				,#{TITLE}
				,#{PTB}
				,#{FTYPE}
				,#{TERM}
				,SYSDATE
				,#{THUMBNAIL}
				,#{ATTACHMENT}
				,#{CONTENT}
				,#{VIDEO}
				,#{HEAD_SIGN}
				,#{MBER_ID}
				,#{APPROVAL}
				,#{BOOK_DATE}
				,#{PRICE}
				,#{CNT}
				,#{FDATE}
				,#{SDATE}
				,#{FDAY}
				,#{SDAY}
				,#{FTIME}
				,#{STIME}
				,#{COMPANIES}
				,#{EMAIL_AGREE}
				,#{TEAMNAME}
				,#{CRNUM}
				,#{TEAMCONTENT}
				,#{ADDRESS}
				,#{EVENTNAME}
				,#{TARGET}
				,#{ENTRYFEE}
				,#{ITEM}
				,#{AFFILIATION}
				,#{TEL_SEC}
				,#{FOBJECT}
				,#{STARTING}
				,#{REQUEST}
				,#{REQURIEMENT}
				,#{BUS}
				,#{NAME}
				,#{SIMPLECONTENT}
				,#{PLACE}
				,#{MIMAGE}
				,#{IMAGE}
				,#{DETAIL}
				,#{RUNTIME}
				,#{FYEAR}
				,#{CAPTAINNAME}
				,#{FORM}
				,#{MAKEYEAR}
				,#{FLOOR}
				,#{ROOM}
				,#{MOVEDATE}
				,#{MOVEPLAN}
				,#{ITEM_OBJECT}
				,#{ITEM_SUBJECT}
				,#{CHARGE_TEL}
				,#{OFFICE_TEL}
				,#{EMAIL}
				,#{HOMEPAGE}
				,#{LOGO}
				,#{ITEM_IMAGE}
				,#{INTRO}
				,#{FFILE}
				)
	</insert>
	
	

	<update id="ContentUpdateData" parameterType="bvo" >	
update COMTNBBS
set NTT_SJ= #{NTT_SJ}
  , MIMAGE= #{MIMAGE}
  , NTT_CN= #{NTT_CN}
  , ANSWER_AT = #{ANSWER_AT}
 ,PARNTSCTT_NO= #{PARNTSCTT_NO}
 ,ANSWER_LC= #{ANSWER_LC}
 ,SORT_ORDR= #{SORT_ORDR}
 ,USE_AT= #{USE_AT}
 ,RDCNT= #{RDCNT}
 ,NTCE_BGNDE= #{NTCE_BGNDE}
 ,NTCE_ENDDE= #{NTCE_ENDDE}
 ,NTCR_ID= #{NTCR_ID}
 ,NTCR_NM= #{NTCR_NM}
 ,PASSWORD= #{PASSWORD}
 ,ATCH_FILE_ID= #{ATCH_FILE_ID}
 ,LAST_UPDT_PNTTM= SYSDATE
 ,LAST_UPDUSR_ID= #{LAST_UPDUSR_ID}
 ,POSITION= #{POSITION}
 ,TITLE= #{TITLE}
 ,PTB= #{PTB}
 ,FTYPE= #{FTYPE}
 ,TERM= #{TERM}
 ,THUMBNAIL= #{THUMBNAIL}
 ,ATTACHMENT= #{ATTACHMENT}
 ,CONTENT= #{CONTENT}
 ,VIDEO= #{VIDEO}
 ,HEAD_SIGN= #{HEAD_SIGN}
 ,ONOFF= #{ONOFF}
 ,MBER_ID= #{MBER_ID}
 ,APPROVAL= #{APPROVAL}
 ,BOOK_DATE= #{BOOK_DATE}
 ,PRICE= #{PRICE}
 ,CNT= #{CNT}
 ,FDATE= #{FDATE}
 ,SDATE= #{SDATE}
 ,FDAY= #{FDAY}
 ,SDAY= #{SDAY}
 ,FTIME= #{FTIME}
 ,STIME= #{STIME}
 ,COMPANIES= #{COMPANIES}
 ,EMAIL_AGREE= #{EMAIL_AGREE}
 ,TEAMNAME= #{TEAMNAME}
 ,CRNUM= #{CRNUM}
 ,TEAMCONTENT= #{TEAMCONTENT}
 ,ADDRESS= #{ADDRESS}
 ,EVENTNAME= #{EVENTNAME}
 ,TARGET= #{TARGET}
 ,ENTRYFEE= #{ENTRYFEE}
 ,ITEM= #{ITEM}
 ,AFFILIATION= #{AFFILIATION}
 ,TEL_SEC= #{TEL_SEC}
 ,FOBJECT= #{FOBJECT}
 ,STARTING= #{STARTING}
 ,REQUEST= #{REQUEST}
 ,REQURIEMENT= #{REQURIEMENT}
 ,BUS= #{BUS}
 ,NAME= #{NAME}
 ,SIMPLECONTENT= #{SIMPLECONTENT}
 ,PLACE= #{PLACE}
 ,IMAGE= #{IMAGE}
 ,DETAIL= #{DETAIL}
 ,FFILE= #{FFILE}
 ,RUNTIME= #{RUNTIME}
 ,FYEAR= #{FYEAR}
 ,CAPTAINNAME= #{CAPTAINNAME}
 ,FORM= #{FORM}
 ,MAKEYEAR= #{MAKEYEAR}
 ,FLOOR     = #{FLOOR}
 ,ROOM      = #{ROOM}
 ,MOVEDATE  = #{MOVEDATE}
 ,MOVEPLAN  = #{MOVEPLAN}
 ,ITEM_OBJECT  = #{ITEM_OBJECT}
 ,ITEM_SUBJECT  = #{ITEM_SUBJECT}
 ,CHARGE_TEL   = #{CHARGE_TEL}
 ,OFFICE_TEL  = #{OFFICE_TEL}
 ,EMAIL = #{EMAIL}
 ,HOMEPAGE = #{HOMEPAGE}
 ,LOGO  = #{LOGO}
 ,ITEM_IMAGE = #{ITEM_IMAGE}
 ,INTRO = #{INTRO}
where 1=1
and bbs_id = #{BBS_ID}
	</update>
	

	<update id="ContentUpdateOnoff" parameterType="bvo" >	
update COMTNBBS
set 
 LAST_UPDT_PNTTM= SYSDATE
 ,ONOFF= #{ONOFF}
where 1=1
and BBS_ID = #{BBS_ID}
	</update>


	<update id="ContentUpdateRdcnt" parameterType="bvo" >	
		update COMTNBBS
		set 
		 LAST_UPDT_PNTTM= SYSDATE
		 ,RDCNT=  #{RDCNT}  +  (SELECT RDCNT FROM COMTNBBS WHERE 1=1 AND  BBS_ID =  #{BBS_ID} ) 
		where 1=1
		and BBS_ID = #{BBS_ID}
	</update>


	<!-- 회원 조회 -->
	<select id="infoSelect"  resultType="egovframework.com.cmm.LoginVO" parameterType="egovframework.com.cmm.LoginVO">
			SELECT mber_id AS id
			, mber_nm AS name
			, ihidNum AS ihidNum
			, password AS password
			, mber_email_adres AS email
			, 'GNR' AS userSe
			, '-' AS orgnztId
			, esntl_id AS uniqId
			, MBTLNUM as tel
			, to_char(sbscrb_de,'yyyy-mm-dd hh:mi:ss') as RDATE
			FROM COMTNGNRLMBER
			WHERE mber_id = #{id}
	</select>
</mapper>