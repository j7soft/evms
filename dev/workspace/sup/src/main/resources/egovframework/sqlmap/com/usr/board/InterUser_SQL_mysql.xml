<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="InterUserDAO">

	<resultMap id="blist" type="egovframework.com.cmm.BoardVO">
		<result property='NTT_ID' column='NTT_ID' />
		<result property='BBS_ID' column='BBS_ID' />
		<result property='NTT_NO' column='NTT_NO' />
		<result property='NTT_SJ' column='NTT_SJ' />
		<result property='NTT_CN' column='NTT_CN' />
		<result property='ANSWER_AT' column='ANSWER_AT' />
		<result property='PARNTSCTT_NO' column='PARNTSCTT_NO' />
		<result property='ANSWER_LC' column='ANSWER_LC' />
		<result property='SORT_ORDR' column='SORT_ORDR' />
		<result property='USE_AT' column='USE_AT' />
		<result property='RDCNT' column='RDCNT' />
		<result property='NTCE_BGNDE' column='NTCE_BGNDE' />
		<result property='NTCE_ENDDE' column='NTCE_ENDDE' />
		<result property='NTCR_ID' column='NTCR_ID' />
		<result property='NTCR_NM' column='NTCR_NM' />
		<result property='PASSWORD' column='PASSWORD' />
		<result property='ATCH_FILE_ID' column='ATCH_FILE_ID' />
		<result property='FRST_REGIST_PNTTM' column='FRST_REGIST_PNTTM' />
		<result property='FRST_REGISTER_ID' column='FRST_REGISTER_ID' />
		<result property='LAST_UPDT_PNTTM' column='LAST_UPDT_PNTTM' />
		<result property='LAST_UPDUSR_ID' column='LAST_UPDUSR_ID' />
		<result property='POSITION' column='POSITION' />
		<result property='TITLE' column='TITLE' />
		<result property='PTB' column='PTB' />
		<result property='FTYPE' column='FTYPE' />
		<result property='TERM' column='TERM' />
		<result property='PUSHDATE' column='PUSHDATE' />
		<result property='THUMBNAIL' column='THUMBNAIL' />
		<result property='ATTACHMENT' column='ATTACHMENT' />
		<result property='CONTENT' column='CONTENT' />
		<result property='VIDEO' column='VIDEO' />
		<result property='HEAD_SIGN' column='HEAD_SIGN' />
		<result property='ONOFF' column='ONOFF' />
		<result property='MBER_ID' column='MBER_ID' />
		<result property='APPROVAL' column='APPROVAL' />
		<result property='BOOK_DATE' column='BOOK_DATE' />
		<result property='PRICE' column='PRICE' />
		<result property='CNT' column='CNT' />
		<result property='FDATE' column='FDATE' />
		<result property='SDATE' column='SDATE' />
		<result property='FDAY' column='FDAY' />
		<result property='SDAY' column='SDAY' />
		<result property='FTIME' column='FTIME' />
		<result property='STIME' column='STIME' />
		<result property='COMPANIES' column='COMPANIES' />
		<result property='EMAIL_AGREE' column='EMAIL_AGREE' />
		<result property='TEAMNAME' column='TEAMNAME' />
		<result property='CRNUM' column='CRNUM' />
		<result property='TEAMCONTENT' column='TEAMCONTENT' />
		<result property='ADDRESS' column='ADDRESS' />
		<result property='EVENTNAME' column='EVENTNAME' />
		<result property='TARGET' column='TARGET' />
		<result property='ENTRYFEE' column='ENTRYFEE' />
		<result property='ITEM' column='ITEM' />
		<result property='AFFILIATION' column='AFFILIATION' />
		<result property='TEL_SEC' column='TEL_SEC' />
		<result property='FOBJECT' column='FOBJECT' />
		<result property='STARTING' column='STARTING' />
		<result property='REQUEST' column='REQUEST' />
		<result property='REQURIEMENT' column='REQURIEMENT' />
		<result property='BUS' column='BUS' />
		<result property='NAME' column='NAME' />
		<result property='SIMPLECONTENT' column='SIMPLECONTENT' />
		<result property='PLACE' column='PLACE' />
		<result property='MIMAGE' column='MIMAGE' />
		<result property='IMAGE' column='IMAGE' />
		<result property='DETAIL' column='DETAIL' />
		<result property='FFILE' column='FFILE' />
		<result property='RUNTIME' column='RUNTIME' />
		<result property='FYEAR' column='FYEAR' />
		<result property='CAPTAINNAME' column='CAPTAINNAME' />
		<result property='FORM' column='FORM' />
		<result property='MAKEYEAR' column='MAKEYEAR' />
		<result property='FLOOR' column='FLOOR' />
		<result property='ROOM' column='ROOM' />
		<result property='MOVEDATE' column='MOVEDATE' />
		<result property='MOVEPLAN' column='MOVEPLAN' />
		<result property='ITEM_OBJECT' column='ITEM_OBJECT' />
		<result property='ITEM_SUBJECT' column='ITEM_SUBJECT' />
		<result property='CHARGE_TEL' column='CHARGE_TEL' />
		<result property='OFFICE_TEL' column='OFFICE_TEL' />
		<result property='EMAIL' column='EMAIL' />
		<result property='HOMEPAGE' column='HOMEPAGE' />
		<result property='LOGO' column='LOGO' />
		<result property='ITEM_IMAGE' column='ITEM_IMAGE' />
		<result property='INTRO' column='INTRO' />
		<result property='USAGE' column='USAGE' /> 
	</resultMap>
	

	<select id="boardSelect" parameterType="bvo" resultMap="blist">
		select
		NTT_ID,BBS_ID,NTT_NO,NTT_SJ,MIMAGE,NTT_CN,ANSWER_AT,PARNTSCTT_NO,ANSWER_LC,SORT_ORDR,USE_AT,RDCNT,NTCE_BGNDE,NTCE_ENDDE,NTCR_ID,NTCR_NM,PASSWORD,ATCH_FILE_ID,FRST_REGIST_PNTTM,FRST_REGISTER_ID,LAST_UPDT_PNTTM,LAST_UPDUSR_ID,POSITION,TITLE,PTB,FTYPE,TERM,DATE_FORMAT(PUSHDATE, '%Y-%m-%d') as PUSHDATE,THUMBNAIL,ATTACHMENT,CONTENT,VIDEO,HEAD_SIGN,DECODE(ONOFF , 'Y' , '승인'  , 'N', '거절')  as ONOFF ,MBER_ID,APPROVAL,BOOK_DATE,PRICE,CNT,DATE_FORMAT(FDATE, '%Y-%m-%d')as
		FDATE,DATE_FORMAT(SDATE, '%Y-%m-%d')as
		SDATE,FDAY,SDAY,FTIME,STIME,COMPANIES,EMAIL_AGREE,TEAMNAME,CRNUM,TEAMCONTENT,ADDRESS,EVENTNAME,TARGET,ENTRYFEE,ITEM,AFFILIATION,TEL_SEC,FOBJECT,STARTING,REQUEST,REQURIEMENT,BUS,NAME,SIMPLECONTENT,PLACE,IMAGE,DETAIL,FFILE,RUNTIME,FYEAR,CAPTAINNAME,FORM,MAKEYEAR,FLOOR,ROOM,MOVEDATE,MOVEPLAN,ITEM_OBJECT,ITEM_SUBJECT,CHARGE_TEL,OFFICE_TEL,EMAIL,HOMEPAGE,LOGO,ITEM_IMAGE,INTRO,USAGE
		from COMTNBBS
		
		WHERE NTT_ID = #{NTT_ID}
		order by PUSHDATE DESC
	</select>

	<select id="boardSelectOne" parameterType="bvo" resultMap="blist">
		select
		NTT_ID,BBS_ID,NTT_NO,NTT_SJ,MIMAGE,NTT_CN,ANSWER_AT,PARNTSCTT_NO,ANSWER_LC,SORT_ORDR,USE_AT,RDCNT,NTCE_BGNDE,NTCE_ENDDE,NTCR_ID,NTCR_NM,PASSWORD,ATCH_FILE_ID,FRST_REGIST_PNTTM,FRST_REGISTER_ID,LAST_UPDT_PNTTM,LAST_UPDUSR_ID,POSITION,TITLE,PTB,FTYPE,TERM,DATE_FORMAT(PUSHDATE, '%Y-%m-%d') as PUSHDATE,THUMBNAIL,ATTACHMENT,CONTENT,VIDEO,HEAD_SIGN,DECODE(ONOFF , 'Y' , '승인'  , 'N', '거절')  as ONOFF ,MBER_ID,APPROVAL,BOOK_DATE,PRICE,CNT,DATE_FORMAT(FDATE, '%Y-%m-%d')as
		FDATE,DATE_FORMAT(SDATE, '%Y-%m-%d')as
		SDATE,FDAY,SDAY,FTIME,STIME,COMPANIES,EMAIL_AGREE,TEAMNAME,CRNUM,TEAMCONTENT,ADDRESS,EVENTNAME,TARGET,ENTRYFEE,ITEM,AFFILIATION,TEL_SEC,FOBJECT,STARTING,REQUEST,REQURIEMENT,BUS,NAME,SIMPLECONTENT,PLACE,IMAGE,DETAIL,FFILE,RUNTIME,FYEAR,CAPTAINNAME,FORM,MAKEYEAR,FLOOR,ROOM,MOVEDATE,MOVEPLAN,ITEM_OBJECT,ITEM_SUBJECT,CHARGE_TEL,OFFICE_TEL,EMAIL,HOMEPAGE,LOGO,ITEM_IMAGE,INTRO,USAGE
		from COMTNBBS
		where BBS_ID = #{BBS_ID}
	</select>

	<insert id="boardinsert" parameterType="bvo" >
		insert into COMTNBBS
		(NTT_ID
		,BBS_ID
		,NTT_NO
		,NTT_SJ
		,NTT_CN
		,ANSWER_AT
		,PARNTSCTT_NO
		,ANSWER_LC
		,SORT_ORDR
		,USE_AT
		,RDCNT
		,NTCE_BGNDE
		,NTCE_ENDDE
		,NTCR_ID
		,NTCR_NM
		,PASSWORD
		,ATCH_FILE_ID
		,FRST_REGIST_PNTTM
		,FRST_REGISTER_ID
		,LAST_UPDT_PNTTM
		,LAST_UPDUSR_ID
		,POSITION
		,TITLE
		,PTB
		,FTYPE
		,TERM
		,PUSHDATE
		,THUMBNAIL
		,ATTACHMENT
		,CONTENT
		,VIDEO
		,HEAD_SIGN
		,MBER_ID
		,APPROVAL
		,BOOK_DATE
		,PRICE
		,CNT
		,FDATE
		,SDATE
		,FDAY
		,SDAY
		,FTIME
		,STIME
		,COMPANIES
		,EMAIL_AGREE
		,TEAMNAME
		,CRNUM
		,TEAMCONTENT
		,ADDRESS
		,EVENTNAME
		,TARGET
		,USAGE
		,ENTRYFEE
		,ITEM
		,AFFILIATION
		,TEL_SEC
		,FOBJECT
		,STARTING
		,REQUEST
		,REQURIEMENT
		,BUS
		,NAME
		,SIMPLECONTENT
		,PLACE
		,MIMAGE
		,IMAGE
		,DETAIL
		,RUNTIME
		,FYEAR
		,CAPTAINNAME
		,FORM
		,MAKEYEAR
		,FLOOR
		,ROOM
		,MOVEDATE
		,MOVEPLAN
		,ITEM_OBJECT
		,ITEM_SUBJECT
		,CHARGE_TEL
		,OFFICE_TEL
		,EMAIL
		,HOMEPAGE
		,LOGO
		,ITEM_IMAGE
		,INTRO
		,FFILE
		,USAGE
		)
		values
		(#{NTT_ID}
		,seq_content.nextval
		,#{NTT_NO}
		,#{NTT_SJ}
		,#{NTT_CN}
		,#{ANSWER_AT}
		,#{PARNTSCTT_NO}
		,#{ANSWER_LC}
		,#{SORT_ORDR}
		,'5'
		,#{RDCNT}
		,#{NTCE_BGNDE}
		,#{NTCE_ENDDE}
		,#{NTCR_ID}
		,#{NTCR_NM}
		,#{PASSWORD}
		,#{ATCH_FILE_ID}
		,DATE_FORMAT(now(), '%Y-%m-%d %H:%i:%s')
		,#{FRST_REGISTER_ID}
		,DATE_FORMAT(now(), '%Y-%m-%d %H:%i:%s')
		,#{LAST_UPDUSR_ID}
		,#{POSITION}
		,#{TITLE}
		,#{PTB}
		,#{FTYPE}
		,#{TERM}
		,DATE_FORMAT(now(), '%Y-%m-%d %H:%i:%s')
		,#{THUMBNAIL}
		,#{ATTACHMENT}
		,#{CONTENT}
		,#{VIDEO}
		,#{HEAD_SIGN}
		,#{MBER_ID}
		,#{APPROVAL}
		,#{BOOK_DATE}
		,#{PRICE}
		,#{CNT}
		,#{FDATE}
		,#{SDATE}
		,#{FDAY}
		,#{SDAY}
		,#{FTIME}
		,#{STIME}
		,#{COMPANIES}
		,#{EMAIL_AGREE}
		,#{TEAMNAME}
		,#{CRNUM}
		,#{TEAMCONTENT}
		,#{ADDRESS}
		,#{EVENTNAME}
		,#{TARGET}
		,#{USAGE}
		,#{ENTRYFEE}
		,#{ITEM}
		,#{AFFILIATION}
		,#{TEL_SEC}
		,#{FOBJECT}
		,#{STARTING}
		,#{REQUEST}
		,#{REQURIEMENT}
		,#{BUS}
		,#{NAME}
		,#{SIMPLECONTENT}
		,#{PLACE}
		,#{MIMAGE}
		,#{IMAGE}
		,#{DETAIL}
		,#{RUNTIME}
		,#{FYEAR}
		,#{CAPTAINNAME}
		,#{FORM}
		,#{MAKEYEAR}
		,#{FLOOR}
		,#{ROOM}
		,#{MOVEDATE}
		,#{MOVEPLAN}
		,#{ITEM_OBJECT}
		,#{ITEM_SUBJECT}
		,#{CHARGE_TEL}
		,#{OFFICE_TEL}
		,#{EMAIL}
		,#{HOMEPAGE}
		,#{LOGO}
		,#{ITEM_IMAGE}
		,#{INTRO}
		,#{FFILE}
		,#{USAGE}
		)
		</insert>
		<update id="boardUpdate" parameterType="bvo">
			update COMTNBBS
				set LAST_UPDT_PNTTM=DATE_FORMAT(now(), '%Y-%m-%d %H:%i:%s'), POSITION=#{POSITION}, TITLE=#{TITLE}, PTB=#{PTB}, FTYPE=#{FTYPE}, TERM=#{TERM}, THUMBNAIL=#{THUMBNAIL}, ATTACHMENT=#{ATTACHMENT}, CONTENT=#{CONTENT}, VIDEO=#{VIDEO}, HEAD_SIGN=#{HEAD_SIGN},  APPROVAL=#{APPROVAL}, BOOK_DATE=#{BOOK_DATE}, PRICE=#{PRICE}, CNT=#{CNT}, FDATE=#{FDATE}, SDATE=#{SDATE}, FDAY=#{FDAY}, SDAY=#{SDAY}, FTIME=#{FTIME}, STIME=#{STIME}, COMPANIES=#{COMPANIES}, EMAIL_AGREE=#{EMAIL_AGREE}, TEAMNAME=#{TEAMNAME}, CRNUM=#{CRNUM}, TEAMCONTENT=#{TEAMCONTENT}, ADDRESS=#{ADDRESS}, EVENTNAME=#{EVENTNAME}, TARGET=#{TARGET}, ENTRYFEE=#{ENTRYFEE}, ITEM=#{ITEM}, AFFILIATION=#{AFFILIATION}, TEL_SEC=#{TEL_SEC}, FOBJECT=#{FOBJECT}, STARTING=#{STARTING}, REQUEST=#{REQUEST}, REQURIEMENT=#{REQURIEMENT}, BUS=#{BUS}, NAME=#{NAME}, SIMPLECONTENT=#{SIMPLECONTENT}, PLACE=#{PLACE}, MIMAGE=#{MIMAGE}, IMAGE=#{IMAGE}, DETAIL=#{DETAIL}, RUNTIME=#{RUNTIME}, FYEAR=#{FYEAR}, CAPTAINNAME=#{CAPTAINNAME}, FORM=#{FORM}, MAKEYEAR=#{MAKEYEAR}, FLOOR=#{FLOOR}, ROOM=#{ROOM}, MOVEDATE=#{MOVEDATE}, MOVEPLAN=#{MOVEPLAN}, ITEM_OBJECT=#{ITEM_OBJECT}, ITEM_SUBJECT=#{ITEM_SUBJECT}, CHARGE_TEL=#{CHARGE_TEL}, OFFICE_TEL=#{OFFICE_TEL}, EMAIL=#{EMAIL}, HOMEPAGE=#{HOMEPAGE}, LOGO=#{LOGO}, ITEM_IMAGE=#{ITEM_IMAGE}, INTRO=#{INTRO} 
			where BBS_ID = #{BBS_ID}
		</update>
		
		<select id="bookSelect" parameterType="bvo" resultMap="blist">
			select
			NTT_ID,BBS_ID,NTT_NO,NTT_SJ,MIMAGE,NTT_CN,ANSWER_AT,PARNTSCTT_NO,ANSWER_LC,SORT_ORDR,USE_AT,RDCNT,NTCE_BGNDE,NTCE_ENDDE,NTCR_ID,NTCR_NM,PASSWORD,ATCH_FILE_ID,DATE_FORMAT(FRST_REGIST_PNTTM, '%Y-%m-%d')
			as FRST_REGIST_PNTTM
			,FRST_REGISTER_ID,DATE_FORMAT(LAST_UPDT_PNTTM,'%Y-%m-%d')as
			LAST_UPDT_PNTTM,LAST_UPDUSR_ID,POSITION,TITLE,PTB,FTYPE,TERM,DATE_FORMAT(PUSHDATE, '%Y-%m-%d')as
			PUSHDATE,THUMBNAIL,ATTACHMENT,CONTENT,VIDEO,HEAD_SIGN,DECODE(ONOFF , 'Y' , '승인'  , 'N', '거절')  as ONOFF ,MBER_ID,APPROVAL,BOOK_DATE,PRICE,CNT,DATE_FORMAT(FDATE, '%Y-%m-%d')as FDATE,DATE_FORMAT(SDATE, '%Y-%m-%d')as SDATE,FDAY,SDAY,FTIME,STIME,COMPANIES,EMAIL_AGREE,TEAMNAME,CRNUM,TEAMCONTENT,ADDRESS,EVENTNAME,TARGET,ENTRYFEE,ITEM,AFFILIATION,TEL_SEC,FOBJECT,STARTING,REQUEST,REQURIEMENT,BUS,NAME,SIMPLECONTENT,PLACE,IMAGE,DETAIL,FFILE,RUNTIME,FYEAR,CAPTAINNAME,FORM,MAKEYEAR,FLOOR,ROOM,MOVEDATE,MOVEPLAN,ITEM_OBJECT,ITEM_SUBJECT,CHARGE_TEL,OFFICE_TEL,EMAIL,HOMEPAGE,LOGO,ITEM_IMAGE,INTRO
			from COMTNBBS
			WHERE MBER_ID = #{MBER_ID}
			order by PUSHDATE DESC
		</select>
		
		
		
		
		
	
		
		
		
		<update id="loginUpdate" parameterType="egovframework.com.cmm.LoginVO">
			update COMTNGNRLMBER
			set PASSWORD = #{password},
				MBTLNUM = #{tel},
				MBER_EMAIL_ADRES = #{email}
			where MBER_ID = #{id}	           
		</update>
		<update id="boardCnt" parameterType="bvo">
			update COMTNBBS
			set CNT = #{CNT}
			where BBS_ID = #{BBS_ID}	
		</update>
		<select id="sysdate" resultType="String">
			select DATE_FORMAT(now(), '%Y-%m-%d')as dat from dual
		</select>	
		
		<select id="boardSearch" parameterType="String" resultMap="blist" >
			select NTT_ID,BBS_ID,NTT_NO,NTT_SJ,MIMAGE,NTT_CN,ANSWER_AT,PARNTSCTT_NO,ANSWER_LC,SORT_ORDR,USE_AT,RDCNT,NTCE_BGNDE,NTCE_ENDDE,NTCR_ID,
			NTCR_NM,PASSWORD,ATCH_FILE_ID,FRST_REGIST_PNTTM,FRST_REGISTER_ID,LAST_UPDT_PNTTM,LAST_UPDUSR_ID,POSITION,TITLE,PTB,FTYPE,TERM,
			DATE_FORMAT(PUSHDATE, '%Y-%m-%d') as PUSHDATE,THUMBNAIL,ATTACHMENT,CONTENT,VIDEO,HEAD_SIGN,DECODE(ONOFF , 'Y' , '승인'  , 'N', '거절')  as ONOFF ,MBER_ID,APPROVAL,BOOK_DATE,PRICE,CNT,DATE_FORMAT(FDATE, '%Y-%m-%d')as FDATE,
			DATE_FORMAT(SDATE, '%Y-%m-%d')as SDATE,FDAY,SDAY,FTIME,STIME,COMPANIES,EMAIL_AGREE,TEAMNAME,CRNUM,TEAMCONTENT,ADDRESS,EVENTNAME,
			TARGET,ENTRYFEE,ITEM,AFFILIATION,TEL_SEC,FOBJECT,STARTING,REQUEST,REQURIEMENT,BUS,NAME,SIMPLECONTENT,PLACE,IMAGE,DETAIL,FFILE,RUNTIME,FYEAR,CAPTAINNAME,
			FORM,MAKEYEAR,FLOOR,ROOM,MOVEDATE,MOVEPLAN,ITEM_OBJECT,ITEM_SUBJECT,CHARGE_TEL,OFFICE_TEL,EMAIL,HOMEPAGE,LOGO,ITEM_IMAGE,INTRO
			from 
			(select * from COMTNBBS where TITLE LIKE concat('%' , #{word} , '%') 	 or content like concat('%' , #{word} , '%') or simplecontent like concat('%' , #{word} , '%') )
			where NTT_ID = 'move' or NTT_ID = 'story' or NTT_ID = 'notice' or NTT_ID = 'news' or NTT_ID = 'reference' or NTT_ID = 'freeboard' or NTT_ID = 'gallery' or NTT_ID ='material'
			order by PUSHDATE DESC
		</select>

</mapper>